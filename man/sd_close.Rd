% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ui.R
\name{sd_close}
\alias{sd_close}
\title{Create a 'Close' Button to Exit the Survey}
\usage{
sd_close(
  label_close = NULL,
  label_previous = NULL,
  show_previous = NULL,
  show_restart = FALSE,
  label_restart = NULL,
  clear_cookies = FALSE
)
}
\arguments{
\item{label_close}{Character string. The label of the 'Close' button. Defaults to
\code{NULL}, in which case the word \code{"Exit Survey"} will be used.}

\item{label_previous}{Character string. The label for the 'Previous' button. Defaults to
\code{NULL}, which uses "‚Üê Previous" (or the translated equivalent).}

\item{show_previous}{Logical. Whether to show the Previous button alongside the Close button.
Set to \code{TRUE} to allow users to go back before closing. Defaults to \code{FALSE}. Note: Unlike
\code{sd_nav()}, this parameter does NOT read from the \code{show-previous} YAML setting.}

\item{show_restart}{Logical. Whether to show a 'Restart Survey' button alongside the
Close button. When \code{TRUE}, displays two side-by-side buttons. Defaults to \code{FALSE}.}

\item{label_restart}{Character string. The label for the 'Restart Survey' button.
Defaults to \code{NULL}, which uses "Restart Survey" (or the translated equivalent).}

\item{clear_cookies}{Logical. Whether to clear cookies on exit without showing a
restart button. Use for use cases where the restart button isn't needed but
cookies should be cleared for later resubmission. Defaults to \code{FALSE}.}
}
\value{
A 'shiny' tagList containing the 'Close' button UI element and
associated JavaScript for the exit process.
}
\description{
This function creates a 'Close' button that, when clicked, will trigger the exit process
for the survey. Depending on the server-side configuration, this may show a rating question
or a simple confirmation dialog before attempting to close the current browser tab or window.
}
\details{
The function generates a 'shiny' action button that, when clicked, triggers
the 'show_exit_modal' event. The server-side logic (controlled by the
\code{rate_survey} parameter in \code{sd_server()}) determines whether to show a
rating question or a simple confirmation dialog.

The function also includes a custom message handler for closing the window.
This is necessary because some browsers may not allow JavaScript to close
windows that were not opened by JavaScript. In such cases, the user will be
prompted to close the tab manually.
}
\note{
The actual behavior of the exit process (whether to show a rating
question or not) is controlled by the \code{rate_survey} parameter in the
\code{sd_server()} function, not in this UI function.
}
\examples{
if (interactive()) {
  library(surveydown)

  # Get path to example survey file
  survey_path <- system.file("examples", "sd_close.qmd",
                             package = "surveydown")

  # Copy to a temporary directory
  temp_dir <- tempdir()
  file.copy(survey_path, file.path(temp_dir, "survey.qmd"))
  orig_dir <- getwd()
  setwd(temp_dir)

  # Define a minimal server
  server <- function(input, output, session) {
    sd_server()
  }

  # Run the app
  shiny::shinyApp(ui = sd_ui(), server = server)

  # Clean up
  setwd(orig_dir)
}

}
\seealso{
\code{\link{sd_server}}
}
